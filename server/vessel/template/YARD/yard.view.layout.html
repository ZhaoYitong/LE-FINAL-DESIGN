{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="{% static 'js/tool/jquery.js' %}"></script>
    <title>港口堆场决策支持系统</title>
    <link href="{% static 'images/smu.jpg' %}" rel="icon">
    <link href="{% static 'css/custom.yard.css' %}" rel="stylesheet">
</head>
<body class="body">

<!--写出详细贝位-->

<div class="bay_blank">贝位</div>

<div id="container_information" class="container_information" hidden="true">
    <div style="float:left;width: 600px;height: 100%">
        <table class="container_information_table" border="1px" style="text-align: center">

            <tr>
                <td height="10%" id="container_information_title" colspan="11" bgcolor="#a9a9a9">**贝位详细信息</td>
            </tr>

            <tr height="14%" id="container_information_5_layer">
                <td width="10%" bgcolor="#a9a9a9">5</td>
                <td width="9%" id="A5" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="B5" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="C5" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="D5" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="E5" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="F5" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="G5" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="H5" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="I5" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="J5" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
            </tr>

            <tr height="14%" id="container_information_4_layer">
                <td width="10%" bgcolor="#a9a9a9">4</td>
                <td width="9%" id="A4" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="B4" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="C4" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="D4" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="E4" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="F4" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="G4" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="H4" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="I4" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="J4" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
            </tr>

            <tr height="14%" id="container_information_3_layer">
                <td width="10%" bgcolor="#a9a9a9">3</td>
                <td width="9%" id="A3" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="B3" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="C3" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="D3" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="E3" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="F3" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="G3" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="H3" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="I3" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="J3" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
            </tr>

            <tr height="14%" id="container_information_2_layer">
                <td width="10%" bgcolor="#a9a9a9">2</td>
                <td width="9%" id="A2" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="B2" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="C2" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="D2" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="E2" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="F2" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="G2" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="H2" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="I2" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="J2" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
            </tr>

            <tr height="14%" id="container_information_1_layer">
                <td width="10%" bgcolor="#a9a9a9">1</td>
                <td width="9%" id="A1" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="B1" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="C1" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="D1" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="E1" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="F1" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="G1" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="H1" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="I1" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
                <td width="9%" id="J1" onmouseenter="fun_infor(this)" onmouseleave="re_fun_infor(this)"></td>
            </tr>

            <tr height="14%" id="container_information_col" bgcolor="#a9a9a9">
                <td width="10%">层数<br>贝位</td>
                <td width="9%">1</td>
                <td width="9%">2</td>
                <td width="9%">3</td>
                <td width="9%">4</td>
                <td width="9%">5</td>
                <td width="9%">6</td>
                <td width="9%">7</td>
                <td width="9%">8</td>
                <td width="9%">9</td>
                <td width="9%">10</td>
            </tr>


            <tr>
                <td colspan="11" align="center" bgcolor="#a9a9a9"><input
                        style="display: block; height: 100%; width: 100%;"
                        id="container_information_button" type="button"
                        onclick='des()' value="确定"></td>
            </tr>
        </table>
    </div>
    <div id="add_table" style="float:left;width: 198px;height: 100%;text-align: center;font-size:10px">
        <table class="add_table" border="1px" style="background-color: wheat;" width="198px" height="100%">
            <tr>
                <td width="40%">场箱位</td>
                <td id="add1">BBB</td>
            </tr>
            <tr>
                <td>状态</td>
                <td id="add2"></td>
            </tr>
            <tr>
                <td>箱号</td>
                <td id="add3"></td>
            </tr>
            <tr>
                <td>装卸船</td>
                <td id="add4"></td>
            </tr>
            <tr>
                <td>箱型</td>
                <td id="add5"></td>
            </tr>
            <tr>
                <td>箱重</td>
                <td id="add6"></td>
            </tr>
            <tr>
                <td>卸货港</td>
                <td id="add7"></td>
            </tr>
            <tr>
                <td>尺寸</td>
                <td id="add8"></td>
            </tr>
            <tr>
                <td>持箱人</td>
                <td id="add9"></td>
            </tr>
            <tr>
                <td>装卸日期</td>
                <td id="add10"></td>
            </tr>
        </table>
    </div>
    <script>
        function fun_infor(obj) {
            color_old = obj.style.backgroundColor;
            obj.style.backgroundColor = "yellow";
            document.getElementById("add1").innerText = yard_yardcel[obj.id];
            document.getElementById("add2").innerText = yard_status[obj.id];
            document.getElementById("add3").innerText = yard_ctnno[obj.id];
            document.getElementById("add4").innerText = yard_strloaunlsig[obj.id];
            document.getElementById("add5").innerText = yard_ctntyp[obj.id];
            document.getElementById("add6").innerText = yard_ctnwegt[obj.id];
            document.getElementById("add7").innerText = yard_unloadport[obj.id];
            document.getElementById("add8").innerText = yard_size[obj.id];
            document.getElementById("add9").innerText = yard_owner[obj.id];
            document.getElementById("add10").innerText = yard_loaVesTim[obj.id];
        }

        function re_fun_infor(obj) {
           // obj.style.backgroundColor = color_old;
            obj.style.backgroundColor = yard_color[obj.id];
        }
    </script>
</div>

<!--写贝位-->
<div class="bay_Y">

    <script>
        //这里是写出贝位
        var i = 0;
        var bay = 0;
        for (i = 0; i < 90; i++) {
            bay = 2 * i + 1;
            document.write("<div class='bay_Y_num'>" + bay + "</div>");
        }
    </script>
</div>


<script>
    function paint_col() {
        //这里是写出列号
        var col_list = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J"];
        var i = 0;
        for (i = 0; i < 10; i++) {
            document.write("<div class=\'box_col\'>" + col_list[i] + "</div>")
        }
    }
</script>

<div class="box_title">
    <div class="box_A_title">
        <div class="box_name">A箱区</div>
        <script>
            paint_col();
        </script>
    </div>

    <div class="box_B_title">
        <div class="box_name">B箱区</div>
        <script>
            paint_col();
        </script>
    </div>
    <div class="box_C_title">
        <div class="box_name">C箱区</div>
        <script>
            paint_col();
        </script>
    </div>
    <div class="box_D_title">
        <div class="box_name">D箱区</div>
        <script>
            paint_col();
        </script>
    </div>
    <div class="box_E_title">
        <div class="box_name">E箱区</div>
        <script>
            paint_col();
        </script>
    </div>
    <div class="box_F_title">
        <div class="box_name">F箱区</div>
        <script>
            paint_col();
        </script>
    </div>

</div>

<script>
    function paint_container(yard_add) {
        //这里是画箱子   箱区  贝位 列
        var col_list = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J"];
        var j = 0;
        var add = yard_add;
        for (j = 0; j < 900; j++) {
            //name_str="A"+String(parseInt(j/10)*2+1)+col_list[j%10];
            var bay_str = String(parseInt(j / 10) * 2 + 1);
            var col_str = col_list[j % 10];
            document.write("<div class='container' yard='" + add + "' bay='" + bay_str + "' col='" + col_str + "' onclick='container_add(this,event)'" + "></div>");
        }
    }
</script>

<div class="box_A">
    <script>
        paint_container("A");
    </script>
</div>
<div class="box_B">
    <script>
        paint_container("B");
    </script>
</div>
<div class="box_C">
    <script>
        paint_container("C");
    </script>
</div>
<div class="box_D">
    <script>
        paint_container("D");
    </script>
</div>
<div class="box_E">
    <script>
        paint_container("E");
    </script>
</div>
<div class="box_F">
    <script>
        paint_container("F");
    </script>
</div>

<script>
    function container_add(container_this, e) {
        ////////////////////发送信息//////////////////////////
        var data = {"Box": container_this.getAttribute("yard"), "Bay": container_this.getAttribute("bay")};
        $.ajax({
            url: "",
            type: "POST",
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify(data),
            dataType: "text",
            success: function (yard_database) {
                yard_database = JSON.parse(yard_database);

                yard_yardcel = yard_database["yard_yardcel"];
                yard_status = yard_database["yard_status"];
                yard_ctnno = yard_database["yard_ctnno"];
                yard_strloaunlsig = yard_database["yard_strloaunlsig"];
                yard_ctntyp = yard_database["yard_ctntyp"];
                yard_ctnwegt = yard_database["yard_ctnwegt"];
                yard_unloadport = yard_database["yard_unloadport"];
                yard_size = yard_database["yard_size"];
                yard_owner = yard_database["yard_owner"];
                yard_loaVesTim = yard_database["yard_loaVesTim"];
                yard_color = yard_database["yard_color"];

                //console.log(yard_database);


                var col_list = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J"];
                var lay_list = ["1", "2", "3", "4", "5"];
                var find_str;
                var color_str;
                for (var i = 0; i < 5; i++) {
                    for (var j = 0; j < 10; j++) {
                        find_str = col_list[j] + lay_list[i];
                        color_str = yard_color[find_str];
                        var table_container_obj = document.getElementById(find_str);
                        table_container_obj.style.backgroundColor = color_str;
                    }
                }

                con_tab.hidden = false;


            }

            ,
            error: function (msg) {
                //alert("发送失败");
            }
        });



        //判断空值还原颜色
        if (container_object) {
            container_object.style.backgroundColor = "darksalmon";
            for (var i = 0; i < 10; i++) {
                container_list_object[i].style.backgroundColor = "darksalmon";
            }
            var con_tab = document.getElementById("container_information");
            con_tab.style.left = "383px";
            con_tab.style.top = "100px";
        }
        if (bay_object) {
            bay_object.style.backgroundColor = "skyblue";
        }
        if (box_object) {
            box_object.style.backgroundColor = "skyblue";
        }

        //////////////////操作table
        var yard = container_this.getAttribute("yard");
        var bay = container_this.getAttribute("bay");
        var col = container_this.getAttribute("col");
        var pos_str = yard + bay + col;

        var con_tab = document.getElementById("container_information");
        var pos_str = yard + "箱区" + "*" + bay + "贝位" + "*" + "详细信息";
        var title_tab = document.getElementById("container_information_title");
        title_tab.innerText = pos_str;


        /////////////更改每个箱位的颜色


        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        //更改表格属性颜色  yard_list
        //在点击后获取到箱区 贝位相同的集装箱箱位
        //在确定了层和列后设置颜色
        //改变集装箱颜色 贝位颜色 箱区颜色
        container_this.style.backgroundColor = "red";

        //改变整个贝位的颜色

        var bay_list = document.getElementsByClassName("container");
        ;

        var bay_obj_list = [];
        var bay_list_length = bay_list.length;
        var yard_list_str, bay_list_str;
        for (var i = 0; i < bay_list_length; i++) {
            yard_list_str = bay_list[i].getAttribute("yard");
            bay_list_str = bay_list[i].getAttribute("bay");
            if (yard_list_str == yard && bay_list_str == bay) {
                bay_obj_list.push(bay_list[i]);
            }
        }

        for (var i = 0; i < 10; i++) {
            bay_obj_list[i].style.backgroundColor = "red";
        }

        //传递整个贝位
        container_list_object = bay_obj_list;

        var bay_list = document.getElementsByClassName("bay_Y_num");
        var bay_obj;

        for (var i = 0; i < 90; i++) {
            bay_obj = bay_list[i];
            if (bay_obj.innerHTML == bay) {
                bay_obj.style.backgroundColor = "red";
                bay_object = bay_obj;
                break;
            }
        }

        var box_list = document.getElementsByClassName("box_name");
        var box_obj;

        for (var i = 0; i < 6; i++) {
            box_obj = box_list[i];
            if (box_obj.innerHTML == (yard + "箱区")) {
                box_obj.style.backgroundColor = "red";
                box_object = box_obj;
                break;
            }
        }


        //传递集装箱
        container_object = container_this;

    }


    function des() {
        var con_tab = document.getElementById("container_information");
        con_tab.hidden = true;

        // 还原 颜色 坐标
        container_object.style.backgroundColor = "darksalmon";
        for (var i = 0; i < 10; i++) {
            container_list_object[i].style.backgroundColor = "darksalmon";
        }


        bay_object.style.backgroundColor = "skyblue";
        box_object.style.backgroundColor = "skyblue";
        con_tab.style.left = "383px";
        con_tab.style.top = "100px";


        var col_list = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J"];
        var lay_list = ["1", "2", "3", "4", "5"];
        var find_str;
        for (var i = 0; i < 5; i++) {
            for (var j = 0; j < 10; j++) {
                find_str = col_list[j] + lay_list[i];
                var table_container_obj = document.getElementById(find_str);
                table_container_obj.style.backgroundColor = "wheat";
            }
        }


    }
</script>

<script>
    var container_object;
    var container_list_object;
    var bay_object;
    var box_object;

    var yard_yardcel;
    var yard_status;
    var yard_ctnno;
    var yard_strloaunlsig;
    var yard_ctntyp;
    var yard_ctnwegt;
    var yard_unloadport;
    var yard_size;
    var yard_owner;
    var yard_loaVesTim;
    var yard_color;

    var color_old;


</script>

<script>
    dragElement(document.getElementById(("container_information")));

    function dragElement(elmnt) {
        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        if (document.getElementById(elmnt.id + "header")) {
            /* if present, the header is where you move the DIV from:*/
            document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
        } else {
            /* otherwise, move the DIV from anywhere inside the DIV:*/
            elmnt.onmousedown = dragMouseDown;
        }

        function dragMouseDown(e) {
            e = e || window.event;
            // get the mouse cursor position at startup:

            pos3 = e.clientX;
            pos4 = e.clientY;

            document.onmouseup = closeDragElement;
            // call a function whenever the cursor moves:
            document.onmousemove = elementDrag;


        }

        function elementDrag(e) {
            e = e || window.event;
            // calculate the new cursor position:
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            // set the element's new position:
            if ((elmnt.offsetTop - pos2) > 100) {
                if ((elmnt.offsetLeft - pos1) > 60) {
                    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                    elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
                }

            }

        }

        function closeDragElement() {
            /* stop moving when mouse button is released:*/
            document.onmouseup = null;
            document.onmousemove = null;
        }
    }
</script>


</body>
</html>